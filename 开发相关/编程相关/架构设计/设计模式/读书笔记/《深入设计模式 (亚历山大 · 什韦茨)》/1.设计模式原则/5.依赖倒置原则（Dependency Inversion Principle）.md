>高层次的类不应该依赖于低层次的类。两者都应该依赖于抽象接口。抽象接口不应依赖于具体实现。具体实现应该依赖于抽象接口。

# 不同层次的类

## 低层次的类

低层次的类实现基础操作（例如磁盘操作、传输网络数据和连接数据库等）。

## 高层次的类

高层次类包含复杂业务逻辑以指导低层次类执行特定操作。

依赖倒置原则通常和开闭原则共同发挥作用：你无需修改已有类就能用不同的业务逻辑类扩展低层次的类。

# 示例

在本例中，高层次的预算报告类（BudgetReport）使用低层次的数据库类（MySQLDatabase）来读取和保存其数据。这意味着低层次类中的任何改变（例如当数据库服务器发布新版本时）都可能会影响到高层次的类，但高层次的类不应关注数据存储的细节。

![[Pasted image 20220822213458.png]]

要解决这个问题，你可以创建一个描述读写操作的高层接口，并让报告类使用该接口代替低层次的类。然后你可以修改或扩展低层次的原始类来实现业务逻辑声明的读写接口。

![[Pasted image 20220822213634.png]]

其结果是原始的依赖关系被倒置：现在低层次的类依赖于高层次的抽象。







