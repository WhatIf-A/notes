# 服务治理解决了什么问题？
服务治理要解决的首要任务就是服务注册和服务发现。为了让微服务之间发起面对面的直接调用，我们需要搭建一个中心化的服务注册中心（中心化的信息管理者）。

在服务注册的过程中，有两个关键信息是最为重要的：
1. 服务名称：服务名称通常默认是 spring.application.name 属性，在服务注册过程中我们必须将应用服务名上报到注册中心，这样其他服务才能根据服务名称找到对应的服务节点列表。
2. 地址信息：包括服务节点的 IP 地址和端口。
除此之外，服务注册请求中还包含一些额外的注册信息。

# Nacos 体系结构
Nacos 有三个核心知识点：领域模型、数据模型和基本结构。
## 领域模型
Nacos 领域模型描述了服务与实例之间的边界和层级关系。Nacos 的服务领域模型是以“服务”为维度构建起来的，这个服务并不是指集群中的单个服务器，而是指微服务的服务名。
![[Pasted image 20220804233203.png]]
### 服务
在服务这个层级上我们可以配置元数据和服务保护阈值等信息。
### 集群
一个服务由很多服务实例组成，在每个服务实例启动的时候，我们可以设置它所属的集群，在集群这个层级上，我们也可以配置元数据。
### 实例
这里所说的实例就是指服务节点，我们可以在 Nacos 控制台查看每个实例的 IP 地址和端口、编辑实例的元数据信息、修改它的上线/下线状态或者配置路由权重等等。
## 数据模型
Nacos 的数据模型有三个层次结构，分别是 Namespace、Group 和 Service/DataId。
![[Pasted image 20220804234119.png]]
1. Namespace：即命名空间，它是最顶层的数据结构，我们可以用它来区分开发环境、生产环境等不同环境。默认情况下，所有服务都部署到一个叫做“public”的公共命名空间。
2. Group：在命名空间之下有一个分组结构，默认情况下所有微服务都属于“DEFAULT_GROUP”这个分组，不同分组间的微服务是相互隔离的。
3. Service/DataID：在 Group 分组之下，就是具体的微服务了，比如订单服务、商品服务等等。
通过 Namespace + Group + Service/DataID，我们就可以精准定位到一个具体的微服务。
## Nacos 基本架构
Nacos 的核心功能有两个，一个是 Naming Service，也就我们用来做服务发现的模块； 另一个是 Config Service，用来提供配置项管理、动态更新配置和元数据的功能。
![[Pasted image 20220804234703.png]]
Nacos Core 模块。它可以提供一系列的平台基础功能，是支撑 Nacos 上层业务场景的基石。
![[Pasted image 20220804234905.png]]